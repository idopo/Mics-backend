@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');


:root {
  --bg: #0f1115;
  --panel: #1a1d24;
  --border: #2a2d36;

  --text: #e6e8ee;
  --muted: #9aa0aa;

  --lavender: #b6a6ff;
  --green: #8fd3b6;
  --green-dim: #6bbf9f;

  --warn: #f2c38f;
  --error: #e07a7a;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
  font-feature-settings: "cv02", "cv03", "cv04", "cv11";
}


/* ---------- Header ---------- */

header {
  padding: 1rem 2rem;
  border-bottom: 1px solid var(--border);
}

.subtitle {
  color: var(--muted);
  font-size: 0.9rem;
}

/* ---------- Nav ---------- */

nav {
  margin-top: 8px;
}

nav a {
  margin-right: 14px;
  text-decoration: none;
  color: var(--muted);
  font-weight: 500;
}

nav a:hover {
  color: var(--text);
}

nav a.active {
  color: var(--lavender);
  border-bottom: 2px solid var(--lavender);
  padding-bottom: 2px;
}

/* ---------- Layout ---------- */

main {
  padding: 2rem;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

.split {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

/* ---------- Cards ---------- */

.card {
  background: var(--panel);
  border-radius: 8px;
  padding: 1rem;
}

.card h2 {
  margin: 0;
  font-size: 1.1rem;
}

/* ---------- Lists ---------- */

ul {
  list-style: none;
  padding-left: 0;
}

li {
  padding: 6px 8px;
  border-bottom: 1px solid #333;
  cursor: pointer;
  color: var(--text);
}

li:hover {
  background: rgba(182, 166, 255, 0.08);
}

li.selected {
  background: rgba(182, 166, 255, 0.18);
}

/* ---------- Status ---------- */

.status {
  margin-top: 0.5rem;
  font-size: 0.9rem;
}

.connected {
  color: var(--green);
}

.disconnected {
  color: var(--warn);
}

.status-line {
  margin-top: 10px;
  font-size: 0.9rem;
  color: var(--muted);
}

/* ---------- Text helpers ---------- */

.muted {
  color: var(--muted);
  font-size: 0.9em;
}

.error {
  color: var(--error);
  margin-top: 6px;
}

/* ---------- Grid (pilots) ---------- */

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 1rem;
}


/* ======================================================
   Protocol Create Page
   ====================================================== */

   input,
   textarea,
   select {
     width: 100%;
     background: #12141a;
     border: 1px solid var(--border);
     border-radius: 6px;
     padding: 8px 10px;
     color: var(--text);
     font-size: 0.95rem;
   }
   
   input::placeholder,
   textarea::placeholder {
     color: var(--muted);
   }
   
   textarea {
     resize: vertical;
     min-height: 80px;
   }
   
   /* ======================================================
   Buttons (modern, flat)
   ====================================================== */

/* ======================================================
   Buttons (calm, outline-first)
   ====================================================== */

   button,
   .button-link {
     display: inline-flex;
     align-items: center;
     justify-content: center;
     gap: 6px;
   
     background: transparent;
     color: var(--lavender);
   
     border: 1px solid var(--border);
     border-radius: 4px;
   
     padding: 7px 12px;
     font-size: 0.9rem;
     font-weight: 500;
   
     cursor: pointer;
     text-decoration: none;
   
     transition:
       background 0.12s ease,
       border-color 0.12s ease,
       color 0.12s ease,
       transform 0.05s ease;
   }
   
   /* Hover */
   button:hover,
   .button-link:hover {
     background: rgba(182, 166, 255, 0.08);
     border-color: var(--lavender);
   }
   
   /* Active (pressed) */
   button:active,
   .button-link:active {
     transform: translateY(1px);
   }
   
   /* Disabled */
   button:disabled {
     opacity: 0.5;
     cursor: not-allowed;
   }

   
   /* Primary action */

.button-primary {
  background: rgba(182, 166, 255, 0.12);
  border-color: var(--lavender);
  color: var(--lavender);
}

.button-primary:hover {
  background: rgba(182, 166, 255, 0.18);
}
/* Secondary / subtle buttons */

.button-secondary {
  background: transparent;
  color: var(--lavender);
  border: 1px solid var(--border);
}

.button-secondary:hover {
  background: rgba(182, 166, 255, 0.08);
}

   
   /* Task palette */
   
   #tasks-list li {
     border: 1px solid transparent;
     border-radius: 6px;
     margin-bottom: 6px;
   }
   
   #tasks-list li:hover {
     background: rgba(182, 166, 255, 0.12);
     border-color: var(--lavender);
   }

   /* ======================================================
   Scrollable steps list (Create Protocol)
   ====================================================== */

#steps-list {
  max-height: 55vh;      /* keeps builder usable */
  overflow-y: auto;
  padding-right: 6px;
}

/* scrollbar consistency */
#steps-list::-webkit-scrollbar {
  width: 6px;
}

#steps-list::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 4px;
}

#steps-list::-webkit-scrollbar-track {
  background: transparent;
}

.step-body {
  margin-top: 6px;
}

.step-header .icon-btn {
  font-size: 14px;
  opacity: 0.8;
}

.step-header .icon-btn:hover {
  opacity: 1;
}


/* Icon-only buttons */

.icon-btn {
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 14px;
  padding: 2px 4px;
  line-height: 1;
}

.icon-btn:hover {
  color: var(--text);
}

/* Destructive (trash) */

.icon-danger:hover {
  color: var(--error);
}

   
   /* ======================================================
      Step Cards
      ====================================================== */
   
   #steps-list {
     list-style: none;
     padding-left: 0;
   }
   
   .step-card {
     background: #14171e;
     border: 1px solid var(--border);
     border-radius: 8px;
     padding: 10px;
     margin-bottom: 12px;
   }
   
   .step-header {
     display: flex;
     justify-content: space-between;
     align-items: center;
     margin-bottom: 8px;
   }
   
   .step-header strong {
     font-size: 0.95rem;
   }
   
   .icon-btn {
     background: transparent;
     border: none;
     color: var(--muted);
     font-size: 14px;
     cursor: pointer;
   }
   
   .icon-btn:hover {
     color: var(--error);
   }
   
   /* Params grid */
   
   .params-grid {
     display: grid;
     grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
     gap: 8px;
     margin-top: 6px;
   }
   
   .param-field {
     display: flex;
     flex-direction: column;
   }
   
   .param-field label {
     font-size: 0.75rem;
     color: var(--muted);
     margin-bottom: 2px;
   }
   
   /* Graduation row */
   
   .graduation-row {
     display: flex;
     align-items: center;
     gap: 10px;
     margin-top: 10px;
     padding-top: 8px;
     border-top: 1px dashed var(--border);
   }
   
   .graduation-row label {
     font-size: 0.85rem;
     color: var(--muted);
   }
   
   /* Save section */
   
   #save-protocol-btn {
     margin-top: 12px;
   }


  /* ======================================================
   Subject multi-select list (Assign Protocol)
   ====================================================== */

#subjects-list {
  margin-bottom: 10px;
  direction: ltr; /* ðŸ”‘ prevent RTL glitches */
}

.subject-item {
  padding: 8px 10px;
  border-bottom: 1px solid #333;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.12s ease, border-color 0.12s ease;
}

.subject-item:hover {
  background: rgba(182, 166, 255, 0.08);
}

.subject-item.selected {
  background: rgba(182, 166, 255, 0.18);
  border: 1px solid var(--lavender);
}



/* ======================================================
   Scrollable task palette (Create Protocol)
   ====================================================== */

   #tasks-list {
    max-height: 60vh;        /* fits most screens */
    overflow-y: auto;
    padding-right: 6px;      /* room for scrollbar */
  }
  
  /* Optional: nicer scrollbar (WebKit) */
  #tasks-list::-webkit-scrollbar {
    width: 6px;
  }
  
  #tasks-list::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 4px;
  }
  
  #tasks-list::-webkit-scrollbar-track {
    background: transparent;
  }
  


  /* ======================================================
   Session cards (Pilot view)
   ====================================================== */

.session-card {
  background: #14171e;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 14px;
}

.session-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.session-title {
  font-weight: 600;
  color: var(--lavender);
  margin-bottom: 6px;   /* ðŸ‘ˆ adds space below protocol name */
}


.subject-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
  margin-bottom: 10px;   /* âœ… more separation from steps */
}


/* ---------- Subject pills ---------- */

.subject-tag {
  display: inline-flex;
  align-items: center;

  padding: 2px 10px;
  border-radius: 999px;

  font-size: 0.75rem;
  font-weight: 500;

  background: rgba(182, 166, 255, 0.15);
  color: var(--lavender);

  border: 1px solid rgba(182, 166, 255, 0.35);
}

/* ---------- Step Rows ---------- */
.step-row {
  border-bottom: 1px dashed var(--border);
  padding: 2px 4px;     /* ðŸ”¥ very tight */
  margin: 0;
}


.step-header {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.step-header:hover {
  opacity: 0.9;
}

.step-title {
  font-size: 0.9rem;
  font-weight: 500;
}

/* Graduation badge next to name */
.step-badge {
  font-size: 0.72rem;
  padding: 2px 8px;
  border-radius: 999px;
  background: rgba(182, 166, 255, 0.18);
  color: var(--lavender);
  white-space: nowrap;
}

.step-params {
  margin-top: 4px;         /* â¬…ï¸ was 6px */
  margin-left: 16px;       /* slightly tighter indent */
  font-size: 0.8rem;
  color: var(--muted);
}


.step-row.open .step-params {
  display: block;
}

.param-line {
  margin-bottom: 2px;
}

.param-separator {
  margin-top: 6px;
  margin-bottom: 2px;
  font-size: 0.75rem;
  color: var(--lavender);
  opacity: 0.8;
}

 
/* ---------- Step params toggle ---------- */

.step-params {
  margin-top: 6px;
  margin-left: 18px;
  font-size: 0.8rem;
  color: var(--muted);
}

.step-row:not(.open) .step-params {
  display: none;
}


/* ======================================================
   FIX step header alignment (force left grouping)
   ====================================================== */

   .step-header {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important; /* ðŸ”‘ key fix */
    gap: 8px;
  }
  
  /* Arrow should not shrink */
  .step-header > span:first-child {
    flex-shrink: 0;
  }
  
  /* Step title stays left */
  .step-title {
    flex-shrink: 0;
  }
  
  /* Badge sits right after title, not pushed */
  .step-badge {
    margin-left: 4px;
  }

  /* ======================================================
   Step trial indicator (arrow style, not pill)
   ====================================================== */

.step-trials {
  font-size: 0.75rem;
  color: var(--muted);
  margin-left: 6px;
  white-space: nowrap;
  opacity: 0.85;
}


.hardware-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 6px;
}

.hardware-tag {
  font-size: 0.6rem;
  padding: 1px 4px;
  border-radius: 999px;
  background: rgba(143, 211, 182, 0.10);
  color: rgba(143, 211, 182, 0.9);
  border: 1px solid rgba(143, 211, 182, 0.22);
  line-height: 1.15;
}


/* ======================================================
   Forms â€“ vertical spacing
   ====================================================== */

form {
  display: flex;
  flex-direction: column;
  gap: 10px; /* ðŸ”‘ controls spacing between input, button, error */
}

/* Optional: a bit more air above forms inside cards */
.card form {
  margin-top: 10px;
}

.pilot-card {
  transition: opacity 0.25s ease;
}

.pilot-card button {
  margin-top: 8px;
}

.pilot-offline {
  opacity: 0.4;
  pointer-events: none;
}

.pilot-running {
  border-left: 4px solid #e53935;
}

.pilot-idle {
  border-left: 4px solid #43a047;
}

.pilot-offline-badge {
  color: #888;
  font-size: 0.85em;
}

.muted {
  opacity: 0.6;
  font-style: italic;
}


/* ======================================================
   Modal (Resume/Restart/New)
   ====================================================== */

   .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
    z-index: 9999;
  }
  
  .modal {
    width: 100%;
    max-width: 520px;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 10px;
    box-shadow: 0 18px 60px rgba(0,0,0,0.45);
    overflow: hidden;
  }
  
  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 14px;
    border-bottom: 1px solid var(--border);
  }
  
  .modal-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text);
  }
  
  .modal-close {
    background: transparent;
    border: none;
    color: var(--muted);
    cursor: pointer;
    font-size: 16px;
    padding: 6px 8px;
    border-radius: 6px;
  }
  
  .modal-close:hover {
    color: var(--text);
    background: rgba(182, 166, 255, 0.08);
  }
  
  .modal-body {
    padding: 14px;
  }
  
  .modal-muted {
    color: var(--muted);
    font-size: 0.9rem;
    margin-bottom: 10px;
  }
  
  .modal-kv {
    background: #14171e;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 12px;
  }
  
  .modal-kv > div {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    padding: 4px 0;
  }
  
  .modal-kv span {
    color: var(--muted);
    font-size: 0.85rem;
  }
  
  .modal-kv strong {
    color: var(--text);
    font-size: 0.9rem;
    font-weight: 600;
  }
  
  .modal-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  .modal-actions button {
    width: 100%;
    justify-content: space-between;
    text-align: left;
    padding: 10px 12px;
  }
  
  .modal-sub {
    display: block;
    margin-top: 4px;
    color: var(--muted);
    font-size: 0.78rem;
    font-weight: 400;
  }
  
/* ======================================================
   Scrollable lists (Protocols UI + Assign Protocol)
   Keeps actions visible while lists scroll inside cards
   ====================================================== */

   .scroll-list {
    max-height: 55vh;       /* tune: 45-65vh depending on your layout */
    overflow-y: auto;
    padding-right: 6px;     /* room for scrollbar */
  }
  
  /* nice scrollbar (webkit) */
  .scroll-list::-webkit-scrollbar {
    width: 6px;
  }
  .scroll-list::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 4px;
  }
  .scroll-list::-webkit-scrollbar-track {
    background: transparent;
  }
  

  /* =========================
   Loading mask (no flicker)
   ========================= */

.is-loading {
  position: relative;
  min-height: 180px; /* reserve space so layout doesn't jump */
}

/* subtle overlay */
.is-loading::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(15, 17, 21, 0.00),
    rgba(15, 17, 21, 0.35)
  );
  pointer-events: none;
}

/* skeleton rows */
.skeleton-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.skeleton-row {
  height: 34px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.06);
  overflow: hidden;
  position: relative;
}

.skeleton-row::before {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0.00),
    rgba(255,255,255,0.08),
    rgba(255,255,255,0.00)
  );
  animation: shimmer 1.2s infinite;
}

@keyframes shimmer {
  100% { transform: translateX(100%); }
}

/* =========================
   Item entrance animation
   ========================= */
.fade-in-item {
  animation: fadeInUp 1000ms cubic-bezier(0.22, 0.61, 0.36, 1) both;
  will-change: transform, opacity;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* small stagger if you want (optional) */


/* ===== Modal (for resume/restart/new) ===== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: grid;
  place-items: center;
  z-index: 9999;
}


/* hide only the label, keep button visible */
.btn-label-sr {
  visibility: hidden;
}
.session-card[data-hydrated="1"] .btn-label-sr {
  visibility: visible;
}

.modal {
  width: min(520px, calc(100vw - 24px));
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 14px 40px rgba(0,0,0,0.45);
  overflow: hidden;

  transform: translateY(8px);
  opacity: 0;
  animation: modalIn 160ms ease-out forwards;
}

@keyframes modalIn {
  to { transform: translateY(0); opacity: 1; }
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--border);
}

.modal-title {
  font-weight: 600;
}

.modal-close {
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 16px;
  cursor: pointer;
}

.modal-close:hover { color: var(--text); }

.modal-body {
  padding: 14px;
}

.modal-muted {
  color: var(--muted);
  font-size: 0.9rem;
  margin-bottom: 12px;
}

.modal-kv {
  display: grid;
  gap: 6px;
  margin-bottom: 12px;
}

.modal-kv > div {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: rgba(255,255,255,0.03);
}

.modal-kv span { color: var(--muted); font-size: 0.85rem; }
.modal-kv strong { color: var(--text); }

.modal-actions {
  display: grid;
  gap: 10px;
}

.modal-actions button {
  width: 100%;
  justify-content: flex-start;
  text-align: left;
  padding: 10px 12px;
  border-radius: 10px;
}

.modal-sub {
  display: block;
  color: var(--muted);
  font-size: 0.8rem;
  margin-top: 4px;
}

.sessions-scroll {
  max-height: 65vh;
  overflow-y: auto;
  padding-right: 6px;
}

/* Prevent subpixel bounce during animation */
.fade-in-item {
  will-change: transform, opacity;
}

/* allow scroll-list styling on <ol> too */
ol.scroll-list {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.ascii-logo {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  line-height: 1.15;
  letter-spacing: 0.5px;
  color: var(--lavender);
  user-select: none;
  white-space: pre; /* critical */
  margin: 0;              /* ðŸ”‘ removes browser default */
  padding: 0;
  text-align: left;
  margin-left: -2.8rem;
}

.filter-bar {
  display: grid;
  gap: 6px;
  margin-bottom: 8px;
}

/* chips row */
.chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;

  /* default: no space when empty */
  margin: 0;
  padding: 0;
}

/* only when chips exist */
.chips:not(:empty) {
  margin-top: 4px;     /* small space from header */
  margin-bottom: 6px;  /* small space from input */
}

.chips:not(:empty)::before {
  content: "Filtering by:";
  font-size: 0.7rem;
  color: var(--lavender);
  opacity: 0.75;
  margin-right: 6px;
  align-self: center;
}


.chip button {
  border: none;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
  padding: 0 2px;
}

.typeahead {
  position: relative;
}

.typeahead-menu {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  z-index: 50;
}

.typeahead-item {
  padding: 8px 10px;
  cursor: pointer;
  color: var(--text);
}

.typeahead-item:hover {
  background: rgba(182, 166, 255, 0.08);
}

.typeahead-item.active {
  background: rgba(182, 166, 255, 0.18);
  color: var(--lavender);
}

.filter-input-wrap {
  position: relative;
}

#subject-filter {
  padding-right: 34px; /* tighter than 42px */
}

/* inline clear button (minimal) */
.input-clear {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);

  width: 18px;
  height: 18px;
  padding: 0;

  border: 1px solid transparent;
  border-radius: 999px;

  background: transparent;
  color: var(--muted);

  display: grid;
  place-items: center;

  font-size: 13px;   /* fits bar */
  line-height: 1;
  font-weight: 600;

  opacity: 0;
  pointer-events: none; /* hidden by default */
  transition: opacity 0.12s ease, background 0.12s ease, color 0.12s ease, border-color 0.12s ease;
}

/* when enabled */
.input-clear.is-visible {
  opacity: 0.9;
  pointer-events: auto;
}

.input-clear:hover {
  background: rgba(182, 166, 255, 0.08);
  color: var(--text);
  border-color: var(--border);
}


.session-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin: 6px 0 8px;
  color: var(--muted);
  font-size: 0.8rem;
}

.badge {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.03);
}

.meta-pill {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(182,166,255,0.25);
  background: rgba(182,166,255,0.08);
  color: var(--lavender);
}

.meta-dates {
  opacity: 0.85;
}


.session-meta {
  display: grid;
  gap: 6px;
  margin: 6px 0 8px;
}

.meta-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px 10px;
  align-items: center;
}

.meta-row-dates {
  gap: 10px;
  opacity: 0.85;
}

.meta-date {
  font-size: 0.75rem;
  color: var(--muted);
  white-space: nowrap;
}

.meta-date + .meta-date::before {
  content: "â€¢";
  margin: 0 8px 0 0;
  opacity: 0.35;
}


/* status coloring (optional) */
.status-running { border-color: rgba(143,211,182,0.45); color: var(--green); }
.status-stopped { border-color: rgba(242,195,143,0.45); color: var(--warn); }
.status-error { border-color: rgba(224,122,122,0.45); color: var(--error); }
.status-completed { border-color: rgba(182,166,255,0.45); color: var(--lavender); }

.session-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 6px 10px;
  margin-top: 6px;
}

.meta-dates {
  font-size: 0.75rem;
  color: var(--muted);
  letter-spacing: 0.2px;
  white-space: nowrap;
}

/* optional subtle divider look */
.meta-dates::before {
  content: "â€¢ ";
  opacity: 0.4;
}


/* =========================
   Session card loading mask
   ========================= */
   .session-title {
    font-weight: 700;
    font-size: 1.05rem;
    letter-spacing: 0.2px;
    color: var(--text);
    margin: 0;
  }
  
  .session-header {
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    margin-bottom: 8px;
  }
  

  .session-card {
    position: relative; /* needed for overlay */
  }
  
  /* while loading extra data (latest run / hardware etc) */
  .session-card.is-loading {
    overflow: hidden;
  }
  
  /* subtle veil */
  .session-card.is-loading::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(15, 17, 21, 0.15),
      rgba(15, 17, 21, 0.55)
    );
    pointer-events: none;
  }
  
  /* shimmer bar */
  .session-card.is-loading::before {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(
      90deg,
      rgba(255,255,255,0.00),
      rgba(255,255,255,0.06),
      rgba(255,255,255,0.00)
    );
    animation: shimmer 1.15s infinite;
    pointer-events: none;
  }
  
  /* placeholders inside the card */
  .session-skel {
    display: grid;
    gap: 8px;
    margin-top: 8px;
  }
  
  .session-skel-line {
    height: 12px;
    border-radius: 6px;
    background: rgba(255,255,255,0.06);
  }
  
  .session-skel-line.w40 { width: 40%; }
  .session-skel-line.w55 { width: 55%; }
  .session-skel-line.w70 { width: 70%; }
  .session-skel-line.w85 { width: 85%; }
  
  /* page-level overlay (optional) */
  .page-loading {
    position: relative;
  }
  
  .page-loading::after {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.25);
    pointer-events: none;
    z-index: 999;
    opacity: 0;
    animation: pageVeilIn 120ms ease-out forwards;
  }
  
  @keyframes pageVeilIn {
    to { opacity: 1; }
  }
  


/* =========================
   SESSION CARD: declutter
   (paste at end to override duplicates)
   ========================= */

/* Title: more important */
.session-title {
  font-weight: 750;
  font-size: 1.12rem;
  letter-spacing: 0.2px;
  color: var(--text);
  margin: 0;
}

/* Subjects: bigger + clearer */
.subject-tag {
  font-size: 0.86rem;
  font-weight: 600;
  padding: 4px 12px;
  background: rgba(182, 166, 255, 0.14);
  border: 1px solid rgba(182, 166, 255, 0.32);
}

/* Optional: give subjects row a touch more prominence */
.subject-tags {
  margin-top: 8px;
  margin-bottom: 12px;
  gap: 8px;
}

/* Meta: smaller */
.session-meta {
  display: grid;
  gap: 6px;
  margin: 6px 0 8px;
  font-size: 0.72rem;   /* ðŸ‘ˆ smaller */
  color: rgba(154, 160, 170, 0.92);
}

/* if you use the 2-row meta HTML (recommended) */
.meta-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px 8px;
  align-items: center;
}

.meta-row-dates {
  opacity: 0.8;
}

.meta-date {
  font-size: 0.7rem;
  white-space: nowrap;
}

/* Make pills less chunky */
.badge,
.meta-pill {
  padding: 1px 7px;
  font-size: 0.7rem;
  line-height: 1.2;
}

/* Dates visually secondary */
.meta-date + .meta-date::before {
  content: "â€¢";
  margin: 0 8px 0 0;
  opacity: 0.35;
}


/* =========================
   Session title (nicer header)
   ========================= */

   .session-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  
  .session-title {
    font-weight: 750;
    font-size: 1.18rem;
    line-height: 1.2;
    letter-spacing: 0.2px;
    color: var(--text);
    margin: 0;
  
    /* nice truncation if too long */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  
    /* subtle glow */
    text-shadow: 0 0 18px rgba(182,166,255,0.10);
  }
  

  .session-card-grid{
    display: grid;
    grid-template-columns: 1fr 1px 420px; /* adjust right width */
    gap: 0;
    align-items: stretch;
  }
  
  .session-left{ padding-right: 14px; }
  .session-right{ padding-left: 14px; }
  
  .session-divider{
    background: rgba(0,0,0,0.55); /* thin dark line */
  }
  
  .right-title{
    font-weight: 600;
    margin-bottom: 8px;
  }
  
  .right-body .small{ font-size: 12px; }
  
  .step-box{
    border: 1px solid rgba(0,0,0,0.12);
    border-radius: 10px;
    padding: 10px;
    margin-bottom: 10px;
  }
  
  .step-head{
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-bottom: 8px;
  }
  
  .step-name{ font-weight: 600; }
  .step-type{ opacity: 0.7; font-size: 12px; }
  
  .step-sections{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }
  
  .step-section-title{
    font-size: 12px;
    opacity: 0.75;
    margin-bottom: 6px;
  }
  
  .json-pre{
    margin: 0;
    font-size: 12px;
    max-height: 160px;
    overflow: auto;
    background: rgba(0,0,0,0.04);
    padding: 8px;
    border-radius: 8px;
  }
  
  .json-box{
    width: 100%;
    min-height: 120px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 12px;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid rgba(0,0,0,0.18);
    background: rgba(0,0,0,0.02);
  }
  
  .json-box.is-invalid{
    border-color: #b00020;
    background: rgba(176,0,32,0.05);
  }
  
  .override-actions{
    display: flex;
    justify-content: flex-end;
    margin-top: 6px;
  }
.params-grid-2col {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px 12px;
}
  
  .param-field label {
    display: block;
    font-size: 12px;
    opacity: 0.8;
    margin-bottom: 4px;
  }
  .param-field input.is-invalid {
    outline: 2px solid #c33;
  }
  .session-right, .session-right * {
    pointer-events: auto;
  }

  /* =========================
   SESSION CARD: fixed "1-step" height
   right side scrolls, card never grows
   ========================= */

:root{
  --session-card-h: 240px; /* âœ… this is "1 step" size. tweak 240â€“280 if needed */
}

/* lock the <li> itself */
#sessions > li.session-card{
  height: var(--session-card-h) !important;
  overflow: hidden !important;
}

/* grid must fill the fixed height */
#sessions > li.session-card .session-card-grid{
  height: 100% !important;
  display: grid;
  grid-template-columns: 1fr 1px 1fr; /* equal ratio */
  align-items: stretch;
}

/* prevent columns from forcing size */
#sessions > li.session-card .session-left,
#sessions > li.session-card .session-right{
  min-width: 0;
  min-height: 0;
}

/* left: NEVER scroll internally */
#sessions > li.session-card .session-left{
  overflow: visible !important;
}

/* right: make it a column so the body can scroll */
#sessions > li.session-card .session-right{
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden; /* scroll only inside right-body */
}

/* keep title pinned */
#sessions > li.session-card .right-title{
  flex: 0 0 auto;
}

/* this is the ONLY scrolling region inside the card */
#sessions > li.session-card .right-body{
  flex: 1 1 auto;
  min-height: 0;        /* âœ… critical */
  overflow-y: auto;     /* âœ… scroll steps/overrides here */
  padding-right: 6px;
}

/* keep step boxes from adding weird extra space */
#sessions > li.session-card .step-box{
  margin-bottom: 10px;
}

/* buttons never escape */
#sessions > li.session-card .override-actions{
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  flex-wrap: wrap;
}


/* =========================
   Put START/STOP bottom-left in each session card
   ========================= */

   #sessions > li.session-card .session-left{
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  /* push actions to the bottom */
  #sessions > li.session-card .session-actions{
    margin-top: auto;      /* âœ… moves to bottom */
    align-self: flex-start;/* âœ… left */
    padding-top: 10px;     /* small breathing room */
  }
  

  /* =========================
   Subjects as mouse icons (no pills)
   ========================= */

/* container spacing */
.subject-tags{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;              /* tighter + elegant */
  margin: 8px 0 10px;
}

/* each subject */
.subject-tag{
  display: inline-flex;
  align-items: center;
  gap: 6px;

  padding: 0;             /* remove pill feel */
  border: none;
  background: transparent;

  font-size: 0.82rem;
  font-weight: 500;
  color: var(--text);
}

/* mouse icon */
.subject-tag::before{
  content: "ðŸ­";
  font-size: 0.9rem;
  line-height: 1;
  opacity: 0.9;
}

/* optional subtle hover */
.subject-tag:hover{
  color: var(--lavender);
}

/* =========================
   Session left column layout polish
   ========================= */

/* Make left side a vertical layout */
.session-left{
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Title stays at the top */
.session-header{
  margin-bottom: 6px;
}

/* Subjects block */
.subject-tags{
  margin-top: 6px;
  margin-bottom: 14px;   /* ðŸ‘ˆ more air before meta */
}

/* Meta block (status / mode / dates) */
.session-meta{
  margin-top: auto;      /* ðŸ‘ˆ pushes meta downward */
  margin-bottom: 10px;   /* ðŸ‘ˆ space before button */
  gap: 6px;
}

/* Meta rows spacing */
.session-meta .meta-row{
  gap: 6px 10px;
}

/* Start / Stop button always bottom-left */
.session-actions{
  margin-top: 0;
  display: flex;
  justify-content: flex-start;
}

/* Optional: slightly smaller meta text for hierarchy */
.session-meta{
  font-size: 0.72rem;
  opacity: 0.9;
}

/* =========================
   Fine-tune meta vertical spacing
   ========================= */

/* Pull meta closer to subjects */
.session-meta{
  margin-top: 6px;        /* ðŸ‘ˆ was auto / too far */
  margin-bottom: 12px;    /* space before START button */
}

/* Space BETWEEN meta rows (mode vs dates) */
.session-meta .meta-row-top{
  margin-bottom: 6px;     /* ðŸ‘ˆ separates mode/status from dates */
}

/* Dates slightly softer + tighter */
.session-meta .meta-row-dates{
  opacity: 0.8;
}

/* Optional: keep everything visually balanced */
.subject-tags{
  margin-bottom: 10px;    /* slightly less than before */
}

#sessions > li.session-card .session-actions{
  margin-top: auto;
  padding-top: 0;          /* was 10px */
  margin-bottom: 10px;     /* âœ… lifts it up */
}
input.is-missing {
  border-color: rgba(224,122,122,0.65);
  background: rgba(224,122,122,0.06);
}

/* Add this CSS to your stylesheet (or in a <style> tag) */
.graduation-pill {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 14px;
  background: rgba(111, 66, 193, 0.08); /* soft lavender */
  color: var(--lavender);
  font-weight: 600;
  font-size: 13px;
  margin: 6px 0;
  border: 1px solid rgba(111,66,193,0.12);
}
.graduation-detail {
  display: block;
  margin-top: 4px;
  color: #666;
  font-size: 12px;
}

/* Graduation pill */
.graduation-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 14px;
  background: rgba(111, 66, 193, 0.08); /* soft lavender */
  color: var(--lavender);
  font-weight: 600;
  font-size: 13px;
  margin: 6px 0;
  border: 1px solid rgba(111,66,193,0.12);
  box-shadow: 0 1px 0 rgba(0,0,0,0.02);
}

/* small subdued details under the pill */
.graduation-detail {
  display: block;
  margin-top: 4px;
  color: #6b6b6b;
  font-size: 12px;
  font-weight: 500;
}

/* optional small icon */
.graduation-pill .grad-icon {
  display: inline-flex;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  background: rgba(111,66,193,0.18);
  color: var(--lavender);
}

/* ======================================================
   Pilot view: Params + Graduation polish (append last)
   ====================================================== */

/* Right panel title */
.session-right .right-title{
  font-size: 0.85rem;
  font-weight: 700;
  letter-spacing: .2px;
  color: var(--text);
  margin: 2px 0 10px;
}

/* Step box container (right panel + modal) */
.step-box{
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
}

/* Step header */
.step-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.step-name{
  font-weight: 700;
  font-size: 0.92rem;
  color: var(--text);
  line-height: 1.25;
}

/* Section titles inside step */
.step-section{
  padding-top: 10px;
  margin-top: 10px;
  border-top: 1px solid rgba(255,255,255,0.06);
}

.step-section:first-of-type{
  border-top: none;
  padding-top: 0;
  margin-top: 0;
}

.step-section-title{
  font-size: 0.78rem;
  font-weight: 700;
  letter-spacing: .2px;
  color: rgba(154,160,170,0.95);
  text-transform: none;
  margin-bottom: 8px;
}

/* =========================
   Params grid (read-only + overrides)
   ========================= */

.params-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px 12px;
  margin-top: 8px;
}

@media (max-width: 980px){
  .params-grid{ grid-template-columns: 1fr; }
}

/* Field */
.param-field{
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.param-field label{
  font-size: 0.72rem;
  font-weight: 600;
  color: rgba(154,160,170,0.95);
  letter-spacing: .15px;
  margin: 0;
}

/* Inputs (override + modal read-only) */
.param-field input,
.param-field textarea,
.param-field select{
  width: 100%;
  background: rgba(18,20,26,0.88);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 10px;
  padding: 9px 10px;
  color: var(--text);
  font-size: 0.9rem;
  line-height: 1.25;
  outline: none;
  transition: border-color .12s ease, background .12s ease, box-shadow .12s ease;
}

/* Focus */
.param-field input:focus,
.param-field textarea:focus,
.param-field select:focus{
  border-color: rgba(182,166,255,0.55);
  box-shadow: 0 0 0 3px rgba(182,166,255,0.12);
  background: rgba(18,20,26,0.96);
}

/* Disabled (modal read-only) */
.param-field input:disabled,
.param-field textarea:disabled,
.param-field select:disabled{
  opacity: 0.95;
  color: rgba(230,232,238,0.90);
  background: rgba(255,255,255,0.03);
  border-color: rgba(255,255,255,0.08);
  cursor: not-allowed;
}

/* Placeholder */
.param-field input::placeholder,
.param-field textarea::placeholder{
  color: rgba(154,160,170,0.75);
}

/* Missing + invalid visual states */
.param-field input.is-missing{
  border-color: rgba(242,195,143,0.65);
  background: rgba(242,195,143,0.06);
}

.param-field input.is-invalid{
  border-color: rgba(224,122,122,0.70) !important;
  background: rgba(224,122,122,0.08) !important;
  box-shadow: 0 0 0 3px rgba(224,122,122,0.12);
}

/* Clear-step button row */
.override-actions{
  display: flex;
  justify-content: flex-end;
  margin-top: 10px;
}

/* Make the ghost clear button actually look like a subtle action */
.button-ghost{
  background: transparent;
  border: 1px solid rgba(255,255,255,0.10);
  color: rgba(154,160,170,0.95);
  border-radius: 10px;
  padding: 7px 10px;
  font-size: 0.82rem;
}

.button-ghost:hover{
  border-color: rgba(182,166,255,0.35);
  background: rgba(182,166,255,0.06);
  color: var(--text);
}

/* =========================
   Graduation pill (used in modal and anywhere else)
   ========================= */

.graduation-pill{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 14px;
  background: rgba(182,166,255,0.10);
  border: 1px solid rgba(182,166,255,0.20);
  color: var(--text);
  max-width: 100%;
}

.graduation-pill .grad-icon{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  background: rgba(182,166,255,0.18);
  border: 1px solid rgba(182,166,255,0.22);
  color: var(--lavender);
  font-weight: 800;
  font-size: 12px;
  flex: 0 0 22px;
}

.graduation-pill > div{
  min-width: 0;
}

.graduation-pill .graduation-detail{
  margin-top: 3px;
  font-size: 0.78rem;
  font-weight: 500;
  color: rgba(154,160,170,0.95);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 520px;
}

/* =========================
   Modal step box tweaks (optional but nice)
   ========================= */

.modal .step-box{
  background: rgba(255,255,255,0.02);
  border-color: rgba(255,255,255,0.08);
}

.modal .json-pre{
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 10px;
  padding: 10px;
  font-size: 0.8rem;
  color: rgba(230,232,238,0.92);
  max-height: 220px;
  overflow: auto;
}

/* Scrollbar in the right panel */
.session-right .right-body::-webkit-scrollbar,
.modal #protoModalSteps::-webkit-scrollbar{
  width: 8px;
}
.session-right .right-body::-webkit-scrollbar-thumb,
.modal #protoModalSteps::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,0.12);
  border-radius: 999px;
}
.session-right .right-body::-webkit-scrollbar-track,
.modal #protoModalSteps::-webkit-scrollbar-track{
  background: transparent;
}
#sessions > li.session-card{
  height: var(--session-card-h) !important;
  overflow: hidden !important;
}

/* --- FIX: stop "1-step" cards from showing a scrollbar --- */

/* right-body is the scroll container */
#sessions > li.session-card .right-body{
  overflow-y: auto;
  min-height: 0;
  padding-bottom: 2px; /* tiny buffer prevents 1-2px overflow */
}

/* remove extra bottom space that can force overflow */
#sessions > li.session-card .right-body > :last-child{
  margin-bottom: 0 !important;
}

/* your step boxes currently have margin-bottom that can trigger overflow */
#sessions > li.session-card .step-box{
  margin-bottom: 12px;
}
#sessions > li.session-card .right-body .step-box:last-child{
  margin-bottom: 0 !important;
}

/* OPTIONAL (only if you still see it): prevent horizontal layout wiggles */
#sessions > li.session-card .right-body{
  overflow-x: hidden;
}

/* if json-pre has max-height forcing scrollbars when it shouldn't */
#sessions > li.session-card .json-pre{
  overflow: auto;
  max-height: 160px;
}

/* optional: hide json-pre scrollbar if it's not actually overflowing */
#sessions > li.session-card .json-pre:has(code:only-child){
  scrollbar-width: auto;
}
/* =========================================================
   OVERFLOW FIX PACK (paste at END of file)
   - Prevent page horizontal scroll
   - Make session grid + modal shrinkable
   - Ensure inner grids/pre never force width
   ========================================================= */

/* 1) Hard guard: never allow accidental horizontal scroll */
html, body {
  max-width: 100%;
  overflow-x: hidden;
}

/* 2) Grid: right column must be shrinkable (fixed 420px was forcing overflow) */
#sessions > li.session-card .session-card-grid,
.session-card-grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 1px minmax(0, 420px);
  gap: 0;
  align-items: stretch;
}

/* Make grid children allowed to shrink (CRITICAL for overflow in CSS grid/flex) */
#sessions > li.session-card .session-left,
#sessions > li.session-card .session-right,
.session-left,
.session-right {
  min-width: 0;
  min-height: 0;
}

/* Responsive fallback: on small screens, stack columns */
@media (max-width: 900px) {
  #sessions > li.session-card .session-card-grid,
  .session-card-grid {
    grid-template-columns: minmax(0, 1fr);
  }
  .session-divider { display: none; }
}

/* 3) Modal: prevent modal content from expanding the page */
.modal-overlay {
  overflow-x: hidden;
}

.modal {
  max-width: 100%;
  min-width: 0;
}

.modal-body {
  min-width: 0;
}

/* Any grid inside modal must be shrinkable */
.modal .params-grid {
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
}

.modal .param-field,
.modal input,
.modal textarea,
.modal select {
  min-width: 0;
}

/* Pre/code blocks should scroll internally, never force width */
.modal pre,
.modal .json-pre {
  max-width: 100%;
  overflow-x: auto;
}

/* 4) Extra safety: long titles/labels should truncate instead of forcing width */
.session-title,
.step-name,
.right-title,
.modal-title {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 5) If you keep the fixed-height session card, ensure right side scroll works */
#sessions > li.session-card .session-right {
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

#sessions > li.session-card .right-body {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
}

/* =========================================================
   FINAL: correct scrolling behavior
   - page does NOT scroll when modal open
   - session list can scroll (if you want)
   - params (right-body) scrolls ONLY when needed
   ========================================================= */

/* 1) Lock page scroll ONLY while modal is open (background should not move) */
html:has(.modal-overlay),
body:has(.modal-overlay){
  overflow: hidden !important;
  height: 100% !important;
}

.modal-overlay{
  overflow: auto;           /* overlay can scroll if modal content is tall */
}

/* 2) Sessions list: choose ONE behavior */

/* Option A (recommended): page stays normal, sessions list scrolls */
.sessions-scroll{
  max-height: 65vh;
  overflow-y: auto;
  padding-right: 6px;
}

/* If you prefer Option B (no list scroll, page grows), use this instead:
.sessions-scroll{
  max-height: none !important;
  overflow: visible !important;
  padding-right: 0 !important;
}
*/

/* 3) Session card fixed height (you already have this; keeping it consistent) */
#sessions > li.session-card{
  height: var(--session-card-h, 240px) !important;
  overflow: hidden !important;
}

/* 4) Right panel: only right-body scrolls when content is too long */
#sessions > li.session-card .session-right{
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
  overflow: hidden;          /* prevent the column itself from scrolling */
}

#sessions > li.session-card .right-title{
  flex: 0 0 auto;            /* pinned header */
}

#sessions > li.session-card .right-body{
  flex: 1 1 auto;
  min-height: 0;             /* CRITICAL: allows scrolling to work correctly */
  overflow-y: auto;          /* âœ… scroll appears ONLY when needed */
  overflow-x: hidden;
  padding-right: 6px;
  padding-bottom: 2px;       /* tiny buffer prevents 1px â€œphantomâ€ scroll */
}

/* Prevent last child margins from causing â€œalmost scrollâ€ */
#sessions > li.session-card .right-body > :last-child{
  margin-bottom: 0 !important;
}
#sessions > li.session-card .right-body .step-box:last-child{
  margin-bottom: 0 !important;
}


/* =========================================================
   FIX: remove the tiny "phantom" scrollbar in small params cards
   (keep scrolling only when content is actually long)
   Paste at VERY END
   ========================================================= */

   #sessions > li.session-card .session-right {
    overflow: hidden !important;
    min-height: 0 !important;
  }
  
  /* Make the scroll container robust */
  #sessions > li.session-card .right-body {
    flex: 1 1 auto !important;
    min-height: 0 !important;
  
    /* show scrollbar ONLY when needed */
    overflow-y: auto !important;
    overflow-x: hidden !important;
  
    /* prevents 1-2px overflow from triggering scroll */
    padding-bottom: 8px !important;    /* <- "dead zone" */
    box-sizing: border-box !important;
  
    /* Firefox: don't reserve scrollbar space */
    scrollbar-gutter: auto;
  }
  
  /* Kill the common 1px overflow culprits */
  #sessions > li.session-card .right-body > :last-child,
  #sessions > li.session-card .right-body .step-box:last-child,
  #sessions > li.session-card .right-body .step-section:last-child,
  #sessions > li.session-card .right-body .override-actions:last-child {
    margin-bottom: 0 !important;
  }
  
  /* If ANY rule forced scrollbars, undo it */
  #sessions > li.session-card .right-body {
    overflow-y: auto !important;  /* not scroll */
  }
  
  /* Optional: WebKit scrollbar should be overlay-like & not "steal" width */
  #sessions > li.session-card .right-body::-webkit-scrollbar {
    width: 8px;
  }
  

  /* =========================================================
   FIX: kill phantom scrollbar in short Params cards
   (scroll only when content truly overflows)
   Paste at VERY END
   ========================================================= */

/* Make the right column a strict flex column */
#sessions > li.session-card .session-right{
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  overflow: hidden !important;
  min-height: 0 !important;
}

/* Title must not create weird extra height via margins */
#sessions > li.session-card .right-title{
  flex: 0 0 auto !important;
  margin: 0 0 8px 0 !important;  /* reset top margin to 0 */
}

/* The ONLY scrolling area */
#sessions > li.session-card .right-body{
  flex: 1 1 auto !important;
  min-height: 0 !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;

  /* IMPORTANT: no bottom padding (it forces scroll) */
  padding-bottom: 0 !important;

  /* if you had padding-right for scrollbar room, keep it small */
  padding-right: 4px !important;
}

/* Remove bottom margins that often cause 1-2px overflow */
#sessions > li.session-card .right-body > :last-child,
#sessions > li.session-card .right-body .step-box:last-child{
  margin-bottom: 0 !important;
}

/* If step-box has a margin-bottom that triggers overflow, make it smaller */
#sessions > li.session-card .right-body .step-box{
  margin-bottom: 8px !important;
}

/* Scrollbar should be thin (and only visible when needed) */
#sessions > li.session-card .right-body::-webkit-scrollbar{
  width: 6px !important;
}
/* Graduation pill â€” strong & readable */
.graduation-pill{
  display: inline-flex;
  align-items: center;
  gap: 8px;

  padding: 6px 12px;
  border-radius: 999px;

  background: rgba(182,166,255,0.14);
  border: 1px solid rgba(182,166,255,0.35);

  color: var(--lavender);
  font-weight: 700;
}

/* Circular arrow */
.graduation-pill .grad-icon{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 22px;
  height: 22px;
  border-radius: 50%;

  background: rgba(182,166,255,0.22);
  color: var(--lavender);

  font-size: 14px;
  font-weight: 800;
}

/* Trial number */
.graduation-pill .grad-value{
  font-size: 14px;
  font-weight: 800;
  color: var(--lavender);
  letter-spacing: 0.2px;
}

.param-field label { pointer-events: auto; }/* ===== Param tooltip (reliable, even if input is disabled) ===== */
.param-field { 
  position: relative; 
}




.param-field label { pointer-events: auto; }

/* ===== Tooltip ONLY on the param label ===== */
.param-field label {
  position: relative;          /* anchor tooltip */
  display: inline-block;       /* keeps anchor tight */
  width: fit-content;          /* tooltip aligns nicely */
}


/* ===== ONLY TOOLTIP SYSTEM (JS floating tooltip) ===== */
.ui-tooltip{
  position: fixed;
  z-index: 999999;
  pointer-events: none;

  max-width: min(320px, calc(100vw - 24px));
  padding: 8px 10px;
  border-radius: 10px;

  background: rgba(182,166,255,0.16);
  border: 1px solid rgba(182,166,255,0.45);
  color: var(--lavender);

  font-size: 12px;
  line-height: 1.25;
  white-space: normal;

  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
.ui-tooltip::after{
  content:"";
  position:absolute;
  left: 14px;
  top: -6px;
  border: 6px solid transparent;
  border-bottom-color: rgba(182,166,255,0.45);
}




/* Make label a flex row */
.param-field label{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

/* source indicator (small, subtle, no height shift) */
.param-src{
  font-size: 11px;
  font-weight: 500;
  opacity: 0.65;
  padding: 0;
  border: none;
  background: none;
}

/* optional subtle color coding */
.param-src-protocol{ color: var(--green); }
.param-src-default{ color: var(--lavender); }
.param-src-missing{ color: var(--error); }


.param-field label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

/* wrap just the name in a span so we can clamp it */
.param-name {
  min-width: 0;              /* IMPORTANT: allows flex child to shrink */
  flex: 1 1 auto;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* the source indicator stays fixed-size */
.param-src {
  flex: 0 0 auto;
}

.param-field label{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.param-name{
  min-width: 0;          /* required for ellipsis in flex */
  flex: 1 1 auto;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* allow grid items to shrink properly */
.params-grid .param-field {
  min-width: 0;
}

.param-field label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  min-width: 0;   /* critical */
}

.param-name {
  flex: 1 1 auto;
  min-width: 0;   /* CRITICAL for ellipsis */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* =========================
   PARAM LABEL ELLIPSIS FIX
   paste at VERY END
   ========================= */

/* Ensure the grid is actually 2 columns in session cards */
#sessions .params-grid.params-grid-2col{
  display: grid !important;
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important; /* minmax(0,1fr) is key */
  gap: 10px 12px !important;
}

/* Allow grid items to shrink */
#sessions .params-grid.params-grid-2col > .param-field{
  min-width: 0 !important;
}

/* Make label a shrinkable flex row */
#sessions .param-field > label{
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 8px !important;

  min-width: 0 !important;      /* critical */
  max-width: 100% !important;   /* prevents spill */
}

/* The name is what truncates */
#sessions .param-field > label > .param-name{
  flex: 1 1 auto !important;
  min-width: 0 !important;      /* critical */
  max-width: 100% !important;

  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* The source pill never shrinks */
#sessions .param-field > label > .param-src{
  flex: 0 0 auto !important;
  white-space: nowrap !important;
}

/* ===== PARAM LABEL: FORCE TRUNCATION (paste at very end) ===== */

.params-grid{
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
}

.param-field{
  min-width: 0 !important;     /* allow shrink inside grid */
  overflow: hidden !important; /* prevents bleed into neighbor */
}

.param-field > label{
  width: 100% !important;      /* key: create a real constraint */
  min-width: 0 !important;

  display: flex !important;
  align-items: center !important;
  gap: 8px !important;

  /* IMPORTANT: don't use space-between, it can create weird overflow */
  justify-content: flex-start !important;
}

.param-field > label > .param-name{
  flex: 1 1 auto !important;
  min-width: 0 !important;

  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* push the source to the far right without space-between */
.param-field > label > .param-src{
  margin-left: auto !important;
  flex: 0 0 auto !important;
  white-space: nowrap !important;
}

/* ===== Param name color by source (minimal) ===== */

.param-field > label{
  display: flex !important;
  align-items: center !important;
  width: 100% !important;
  min-width: 0 !important;
}

/* Truncation stays */
.param-name{
  flex: 1 1 auto !important;
  min-width: 0 !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
  font-weight: 600;
}

/* Color by origin */
.param-name-protocol{
  color: var(--green);
}

.param-name-default{
  color: var(--lavender);
}

.param-name-missing{
  color: var(--error);
}

/* ===== Minimal param origin coloring ===== */

.param-field > label{
  display: block !important;
  width: 100% !important;
  min-width: 0 !important;
}

/* Truncation */
.param-name{
  display: block;
  min-width: 0 !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
  font-weight: 600;
}

/* Origin colors */
.param-name-protocol{
  color: var(--green);
}

.param-name-default{
  color: var(--lavender);
}

.param-name-missing{
  color: var(--error);
}
/* Overrides modal validation */
input.is-invalid{
  border-color: var(--error) !important;
  box-shadow: 0 0 0 3px rgba(255, 59, 48, 0.12);
}

/* Overrides modal: actions should NOT be full-width */
#ovDone{
  width: auto !important;
}

#ovDone.button-primary{
  width: auto !important;
}


.ov-actions button{
  width: auto !important;
  justify-content: center !important;
  text-align: center !important;
}
/* =========================
   Overrides modal: make Apply overrides a normal-sized button
   (PASTE AT VERY END)
   ========================= */


/* extra hard lock on your specific button */
#ovDone{
  width: fit-content !important;
  flex: 0 0 auto !important;
/* just in case parent is column somewhere */
  justify-content: center !important;
  text-align: center !important;
  padding: 8px 14px !important;   /* optional: â€œnormalâ€ size */
}
/* Only affect the overrides modal button */
.modal-overlay #ovDone{
  width: fit-content !important;
  flex: 0 0 auto !important;
  display: inline-flex !important;
}
/* =========================
   Overrides modal button LEFT aligned
   ========================= */

  
  #ovDone{
    width: fit-content !important;
    flex: 0 0 auto !important;
  }



  .overrides-modal .modal-actions{
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-start !important; /* left */
    align-items: center !important;
  }
  
  .overrides-modal .modal-actions > button{
    width: auto !important;
    flex: 0 0 auto !important;
    justify-content: center !important;
    text-align: center !important;
  }

  /* =========================
   MODALS: default (resume/restart/new)
   ========================= */
.modal .modal-actions{
  display: grid;
  gap: 10px;
}

.modal .modal-actions button{
  width: 100%;
  justify-content: flex-start;
  text-align: left;
  padding: 10px 12px;
  border-radius: 10px;
}


/* =========================
   Overrides modal ONLY
   ========================= */
   .modal.overrides-modal .modal-actions{
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-start !important; /* âœ… LEFT */
    align-items: center !important;
    gap: 8px !important;
  }
  
  .modal.overrides-modal .modal-actions button{
    width: auto !important;
    flex: 0 0 auto !important;
    justify-content: center !important;
    text-align: center !important;
    padding: 8px 14px !important;
  }
  
  /* hard lock for the specific button */
  .modal.overrides-modal #ovDone{
    width: auto !important;
    display: inline-flex !important;
  }

  .param-current{
    margin-left: 8px;
    font-size: 12px;
    color: #666;
    white-space: nowrap;
  }
  
/* =========================================================
   FIX: Overrides modal param alignment
   - keep label on ONE line (graduation + current)
   - prevent label from becoming taller than neighbors
   ========================================================= */

   .modal.overrides-modal .params-grid {
    align-items: start; /* just in case */
  }
  
  .modal.overrides-modal .param-field {
    min-width: 0;
  }
  
  .modal.overrides-modal .param-field > label {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 8px !important;
  
    width: 100% !important;
    min-width: 0 !important;
  
    /* critical: never wrap to 2 lines */
    white-space: nowrap !important;
    overflow: hidden !important;
  }
  
  .modal.overrides-modal .param-field > label > .param-name {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }
  
  .modal.overrides-modal .param-field > label > .param-current {
    flex: 0 0 auto !important;
    margin-left: auto !important;
    white-space: nowrap !important;
    opacity: 0.85;
  }
  
  /* Optional: make label height consistent even if someone adds extra spans later */
  .modal.overrides-modal .param-field > label {
    line-height: 1.1 !important;
    min-height: 16px !important;
  }
  